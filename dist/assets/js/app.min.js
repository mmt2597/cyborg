!function(){angular.module("myApp",["ui.ace","ui.bootstrap","ui.bootstrap.contextMenu","myApp.Tree_Service","myApp.Tab_Service","myApp.SubTab_Directive","myApp.Resizer_Directive","myApp.NavHeader_Directive","myApp.Main_Controller","myApp.navbarController","myApp.TreeView_Controller","myApp.Tab_Controller","myApp.Ace_Controller","myApp.Preference_Controller"])}(),function(){"use strict";angular.module("myApp.Tab_Controller",[]).controller("TabController",function(){this.tab=1,this.setTab=function(e){this.tab=e},this.isSet=function(e){return this.tab===e}})}(),function(){"use strict";angular.module("myApp.Ace_Controller",[]).controller("aceController",["e", "n", "t", function(e,n,t){n.aceLoaded=function(n){var o=n.getSession();n.renderer;n.setReadOnly(!1),o.setMode("ace/mode/javascript"),o.setUndoManager(new ace.UndoManager),t(function(){var t=e.theme,o=e.fontSize,r=e.tabSize,i=e.gutter,l=e.foldWidget,a=e.printMargin,c=e.showInvisible,u=e.wordWrap,s=e.readOnly;n.setOptions({theme:"ace/theme/"+(void 0!==t?t:"ambiance"),mode:"ace/mode/javascript",readOnly:s,showGutter:i,showPrintMargin:a,showInvisibles:c,showFoldWidgets:l,displayIndentGuides:!0,fontSize:o,tabSize:r,wrap:u})},1e3)}}])}(),function(){"use strict";angular.module("myApp.Main_Controller",[]).controller("mainController",["e", "n", "t", function(e,n,t){e.isVisible=!0,e.showHide=function(){e.isVisible=!e.isVisible},e.showHideConsole=function(){e.isVisible=!e.isVisible},e.tabLength=n.getTab();var o=1;e.addNewTab=function(){n.addTab("untitled",o),o++},e.closeTab=function(e){n.removeTab(e),o--}}])}(),function(){"use strict";angular.module("myApp.navbarController",[]).controller("navbarController",["e", "n", function(e,n){var t,o,r=function(e,r){if(o="folder"==e?"Folder":"File",""!=(t=prompt("Enter New "+o+" Name"))&&null!=t)return o="newfile"==r?{name:t,type:"file"}:{name:t,type:"folder",collapse:!0,children:[]},void n.add(o);alert("Invalid Name")};e.nav.newFile=function(){r("file","newfile")},e.nav.newFolder=function(){r("folder","newfolder")}}])}(),function(){"use strict";angular.module("myApp.Preference_Controller",[]).controller("PreferenceController",["e", "n", "t", function(e,n,t){angular.extend(n,{}),t.get("data/ace_theme.json").then(function(e){n.listOfTheme=e.data}),n.watchChangeTheme=function(){e.theme=n.config.name},n.watchChangeFont=function(){var t=event.pageX;console.log(t),e.fontSize=n.config.fontSize},n.watchChangeTabSize=function(){e.tabSize=n.config.tabSize},n.watchChangeGutter=function(){e.gutter=n.config.gutter},n.watchChangeFoldWidget=function(){e.foldWidget=n.config.foldWidget},n.watchChangePrintMargin=function(){e.printMargin=n.config.printMargin},n.watchChangeShowInvisible=function(){e.showInvisible=n.config.showInvisible},n.watchChangeWordWrap=function(){e.wordWrap=n.config.wordWrap},n.watchChangeReadOnly=function(){e.readOnly=n.config.readOnly}}])}(),function(){"use strict";angular.module("myApp.TreeView_Controller",[]).controller("treeViewController",["e", "n", function(e,n){console.log("AX ",n.getData()),e.treeDirectories=n.getData();var t,o,r=function(e,n,o){var r="folder"==n?"Folder":"File";if(""!=(t=prompt("Enter New "+r+" Name"))&&null!=t){var r="newfile"==o?{name:t,type:"file"}:{name:t,type:"folder",collapse:!0,children:[]};return"folder"==n?(e.push(r),void console.log("Children")):(e.push(r),void console.log("collection"))}alert("Invalid Name")};e.menuOptions=[["New File",function(e){"folder"===e.node.type&&(o=e.node.children,r(o,"file","newfile")),"file"===e.node.type&&(o=e.$parent.collection,r(o,"file","newfile"));var n=document.getElementsByClassName("json")[0];console.log(n)}],["New Folder",function(e){"folder"===e.node.type&&(o=e.node.children,r(o,"folder","newfolder")),"file"===e.node.type&&(o=e.$parent.collection,r(o,"folder","newfolder"))}],["Rename",function(e){var n=e.node.name,t=prompt("Change file name",n);if(t===n)return void alert("You didn't change the name");e.node.name=t}],["Delete",function(e){console.log(angular.toJson(e.node)),e.$parent.collection.splice(e.$parent.$index,1)}]]}])}(),function(){"use strict";angular.module("myApp.NavHeader_Directive",[]).directive("navHeader",function(){return{restrict:"E",templateUrl:"src/views/components/NavHeader.html"}})}(),function(){"use strict";angular.module("myApp.Resizer_Directive",[]).directive("resizer",["e", function(e){return{link:function(n,t,o){function r(e){if(e.preventDefault(),"vertical"==o.resizer){var n=e.pageX;o.resizerMax&&n>o.resizerMax&&(n=parseInt(o.resizerMax)),o.resizerMax&&n<o.resizerMin&&(n=55),document.querySelector(o.resizerLeft.toString()).style.width=n-55+"px"}else{var t=e.pageY;o.resizerYMax&&n>o.resizerYMax&&(t=parseInt(o.resizerYMax)),o.resizerYMax&&n<o.resizerYMin&&(t=55),document.querySelector(o.resizerBottom.toString()).style.height=555-t+"px"}}function i(){e.unbind("mousemove",r),e.unbind("mouseup",i)}t.on("mousedown",function(n){n.preventDefault(),e.on("mousemove",r),e.on("mouseup",i)})}}}])}(),function(){"use strict";angular.module("myApp.SubTab_Directive",[]).directive("subContent",function(){return{restrict:"E",templateUrl:"src/views/components/SubTab.html"}})}(),function(){"use strict";angular.module("myApp.Tab_Service",[]).factory("TabService",function(){var e=[],n={};return n.addTab=function(n,t){e.push({name:n,id:t}),console.log("ADDED")},n.removeTab=function(n){e.splice(n,1)},n.getTab=function(){return e},n})}(),function(){"use strict";angular.module("myApp.Tree_Service",[]).factory("TreeService",["e", function(e){var n={},t=[{name:"GulpSrc",type:"folder",collapse:!0,children:[{name:"CSS",type:"folder",collapse:!1,children:[{name:"style1.css",type:"file"},{name:"style2.css",type:"file"}]}]},{name:"SGulpSrc",type:"folder",collapse:!0,children:[{name:"CSS",type:"folder",collapse:!1,children:[{name:"style1.css",type:"file"},{name:"style2.css",type:"file"}]}]}];return n.add=function(e){t.push(e)},n.delete=function(){!function(e){for(var n in e)console.log(e[n]),console.log(angular.toJson(e[n]))}(t)},n.getData=function(){return console.log(t),t},n}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvVGFiQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXIvYWNlQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXIvbWFpbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVyL25hdmJhckNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVyL3ByZWZlcmVuY2VDb250cm9sbGVyLmpzIiwiY29udHJvbGxlci90cmVlQ29udHJvbGxlci5qcyIsImRpcmVjdGl2ZS9uYXYtaGVhZGVyLWRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZS9yZXNpemVyLWRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZS9zdWItdGFiLWRpcmVjdGl2ZS5qcyIsInNlcnZpY2VzL3RhYlNlcnZpY2UuanMiLCJzZXJ2aWNlcy90cmVlU2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsInRoaXMiLCJ0YWIiLCJzZXRUYWIiLCJ0YWJJZCIsImlzU2V0IiwiJHJvb3RTY29wZSIsIiRzY29wZSIsIiRpbnRlcnZhbCIsImFjZUxvYWRlZCIsIl9lZGl0b3IiLCJzZXNzaW9uIiwiZ2V0U2Vzc2lvbiIsInJlbmRlcmVyIiwic2V0UmVhZE9ubHkiLCJzZXRNb2RlIiwic2V0VW5kb01hbmFnZXIiLCJhY2UiLCJVbmRvTWFuYWdlciIsInNlbGVjdGVkVGhlbWUiLCJ0aGVtZSIsInNlbGVjdGVkRm9udFNpemUiLCJmb250U2l6ZSIsInNlbGVjdGVkVGFiU2l6ZSIsInRhYlNpemUiLCJzZWxlY3RlZEd1dHRlciIsImd1dHRlciIsInNlbGVjdGVkRm9sZFdpZGdldCIsImZvbGRXaWRnZXQiLCJzZWxlY3RlZFByaW50TWFyZ2luIiwicHJpbnRNYXJnaW4iLCJzZWxlY3RlZFNob3dJbnZpc2libGUiLCJzaG93SW52aXNpYmxlIiwic2VsZWN0ZWRXb3JkV3JhcCIsIndvcmRXcmFwIiwic2VsZWN0ZWRSZWFkT25seSIsInJlYWRPbmx5Iiwic2V0T3B0aW9ucyIsInVuZGVmaW5lZCIsIm1vZGUiLCJzaG93R3V0dGVyIiwic2hvd1ByaW50TWFyZ2luIiwic2hvd0ludmlzaWJsZXMiLCJzaG93Rm9sZFdpZGdldHMiLCJkaXNwbGF5SW5kZW50R3VpZGVzIiwid3JhcCIsIlRhYlNlcnZpY2UiLCIkc2NlIiwiaXNWaXNpYmxlIiwic2hvd0hpZGUiLCJzaG93SGlkZUNvbnNvbGUiLCJ0YWJMZW5ndGgiLCJnZXRUYWIiLCJjb3VudCIsImFkZE5ld1RhYiIsImFkZFRhYiIsImNsb3NlVGFiIiwiaW5kZXgiLCJyZW1vdmVUYWIiLCJUcmVlU2VydmljZSIsImNvbnRlbnQiLCJyYWNrIiwiY3JlYXRlQ29udGVudCIsImNvbnRlbnRUeXBlIiwic2VsZWN0ZWRDb250ZXh0TWVudSIsInByb21wdCIsIm5hbWUiLCJ0eXBlIiwiY29sbGFwc2UiLCJjaGlsZHJlbiIsImFkZCIsImFsZXJ0IiwibmF2IiwibmV3RmlsZSIsIm5ld0ZvbGRlciIsIiRodHRwIiwiZXh0ZW5kIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwibGlzdE9mVGhlbWUiLCJkYXRhIiwid2F0Y2hDaGFuZ2VUaGVtZSIsImNvbmZpZyIsIndhdGNoQ2hhbmdlRm9udCIsIngiLCJldmVudCIsInBhZ2VYIiwiY29uc29sZSIsImxvZyIsIndhdGNoQ2hhbmdlVGFiU2l6ZSIsIndhdGNoQ2hhbmdlR3V0dGVyIiwid2F0Y2hDaGFuZ2VGb2xkV2lkZ2V0Iiwid2F0Y2hDaGFuZ2VQcmludE1hcmdpbiIsIndhdGNoQ2hhbmdlU2hvd0ludmlzaWJsZSIsIndhdGNoQ2hhbmdlV29yZFdyYXAiLCJ3YXRjaENoYW5nZVJlYWRPbmx5IiwiZ2V0RGF0YSIsInRyZWVEaXJlY3RvcmllcyIsIml0ZW0iLCJhY2N1IiwiaG9sZGVyIiwicHVzaCIsIm1lbnVPcHRpb25zIiwiJGl0ZW0iLCJub2RlIiwiJHBhcmVudCIsImNvbGxlY3Rpb24iLCJ0cmFuc2l0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY3VycmVudE5hbWUiLCJ0b0pzb24iLCJzcGxpY2UiLCIkaW5kZXgiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwiJGRvY3VtZW50IiwibGluayIsIiRlbGVtZW50IiwiJGF0dHJzIiwibW91c2Vtb3ZlIiwicHJldmVudERlZmF1bHQiLCJyZXNpemVyIiwicmVzaXplck1heCIsInBhcnNlSW50IiwicmVzaXplck1pbiIsInF1ZXJ5U2VsZWN0b3IiLCJyZXNpemVyTGVmdCIsInRvU3RyaW5nIiwic3R5bGUiLCJ3aWR0aCIsInkiLCJwYWdlWSIsInJlc2l6ZXJZTWF4IiwicmVzaXplcllNaW4iLCJyZXNpemVyQm90dG9tIiwiaGVpZ2h0IiwibW91c2V1cCIsInVuYmluZCIsIm9uIiwiZmFjdG9yeSIsInRhYkl0ZW0iLCJzdmMiLCJpZE5vIiwiaWQiLCJpIiwiZGVsZXRlIiwib2JqIiwia2V5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBQSxRQUFBQyxPQUFBLFNBQ0EsU0FDQSxlQUNBLDJCQUNBLHFCQUNBLG9CQUNBLHlCQUVBLDBCQUNBLDRCQUNBLHdCQUNBLHlCQUNBLDRCQUNBLHVCQUNBLHVCQUNBLG1DQ2hCQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsMkJBQ0FDLFdBQUEsZ0JBQUEsV0FDQUMsS0FBQUMsSUFBQSxFQUVBRCxLQUFBRSxPQUFBLFNBQUFDLEdBQ0FILEtBQUFDLElBQUFFLEdBR0FILEtBQUFJLE1BQUEsU0FBQUQsR0FDQSxNQUFBSCxNQUFBQyxNQUFBRSxRQ1pBLFdBQ0EsWUFFQU4sU0FBQUMsT0FBQSwyQkFDQUMsV0FBQSxnQkFBQSxTQUFBTSxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxVQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsWUFDQUYsR0FBQUcsUUFDQUgsR0FBQUksYUFBQSxHQUNBSCxFQUFBSSxRQUFBLHVCQUNBSixFQUFBSyxlQUFBLEdBQUFDLEtBQUFDLGFBRUFWLEVBQUEsV0FFQSxHQUFBVyxHQUFBYixFQUFBYyxNQUNBQyxFQUFBZixFQUFBZ0IsU0FDQUMs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QUFBLHlDQ1BBLFdBQ0EsWUFFQXZILFNBQUFDLE9BQUEsd0JBQ0ErSSxRQUFBLGFBQUEsV0FDQSxHQUFBQyxNQUNBQyxJQWVBLE9BYkFBLEdBQUF6RixPQUFBLFNBQUE0QyxFQUFBOEMsR0FDQUYsRUFBQXpDLE1BQUFwQyxLQUFBaUMsRUFBQStDLEdBQUFELElBQ0F6RCxRQUFBQyxJQUFBLFVBR0F1RCxFQUFBdEYsVUFBQSxTQUFBeUYsR0FDQUosRUFBQTlCLE9BQUFrQyxFQUFBLElBR0FILEVBQUE1RixPQUFBLFdBQ0EsTUFBQTJGLElBR0FDLE9DckJBLFdBQ0EsWUFFQWxKLFNBQUFDLE9BQUEseUJBQ0ErSSxRQUFBLGNBQUEsU0FBQW5FLEdBQ0EsR0FBQXFFLE1BQ0E5QyxJQUNBaEMsS0FBQSxVQUNBQyxLQUFBLFNBQ0FDLFVBQUEsRUFDQUMsV0FDQUgsS0FBQSxNQUNBQyxLQUFBLFNBQ0FDLFVBQUEsRUFDQUMsV0FDQUgsS0FBQSxhQUNBQyxLQUFBLFNBR0FELEtBQUEsYUFDQUMsS0FBQSxhQU1BRCxLQUFBLFdBQ0FDLEtBQUEsU0FDQUMsVUFBQSxFQUNBQyxXQUNBSCxLQUFBLE1BQ0FDLEtBQUEsU0FDQUMsVUFBQSxFQUNBQyxXQUNBSCxLQUFBLGFBQ0FDLEtBQUEsU0FHQUQsS0FBQSxhQUNBQyxLQUFBLFlBd0JBLE9BaEJBNkUsR0FBQTFFLElBQUEsU0FBQTZCLEdBQ0FELEVBQUFJLEtBQUFILElBRUE2QyxFQUFBSSxPQUFBLFlBQ0EsU0FBQUMsR0FDQSxJQUFBLEdBQUFDLEtBQUFELEdBQ0E3RCxRQUFBQyxJQUFBNEQsRUFBQUMsSUFDQTlELFFBQUFDLElBQUEzRixRQUFBa0gsT0FBQXFDLEVBQUFDLE1BRUFwRCxJQUdBOEMsRUFBQS9DLFFBQUEsV0FFQSxNQURBVCxTQUFBQyxJQUFBUyxHQUNBQSxHQUVBOEMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXG4gICAgICAgICd1aS5hY2UnLFxuICAgICAgICAndWkuYm9vdHN0cmFwJyxcbiAgICAgICAgJ3VpLmJvb3RzdHJhcC5jb250ZXh0TWVudScsXG4gICAgICAgICdteUFwcC5UcmVlX1NlcnZpY2UnLFxuICAgICAgICAnbXlBcHAuVGFiX1NlcnZpY2UnLFxuICAgICAgICAnbXlBcHAuU3ViVGFiX0RpcmVjdGl2ZScsXG4gICAgICAgIC8vJ215QXBwLlRyZWVWaWV3X0RpcmVjdGl2ZScsXG4gICAgICAgICdteUFwcC5SZXNpemVyX0RpcmVjdGl2ZScsXG4gICAgICAgICdteUFwcC5OYXZIZWFkZXJfRGlyZWN0aXZlJyxcbiAgICAgICAgJ215QXBwLk1haW5fQ29udHJvbGxlcicsXG4gICAgICAgICdteUFwcC5uYXZiYXJDb250cm9sbGVyJyxcbiAgICAgICAgJ215QXBwLlRyZWVWaWV3X0NvbnRyb2xsZXInLFxuICAgICAgICAnbXlBcHAuVGFiX0NvbnRyb2xsZXInLFxuICAgICAgICAnbXlBcHAuQWNlX0NvbnRyb2xsZXInLFxuICAgICAgICAnbXlBcHAuUHJlZmVyZW5jZV9Db250cm9sbGVyJ10pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAuVGFiX0NvbnRyb2xsZXInLCBbXSlcbiAgICAgIC5jb250cm9sbGVyKCdUYWJDb250cm9sbGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMudGFiID0gMTtcblxuICAgICAgICAgIHRoaXMuc2V0VGFiID0gZnVuY3Rpb24gKHRhYklkKSB7XG4gICAgICAgICAgICB0aGlzLnRhYiA9IHRhYklkO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0aGlzLmlzU2V0ID0gZnVuY3Rpb24odGFiSWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhYiA9PT0gdGFiSWQ7XG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAuQWNlX0NvbnRyb2xsZXInLCBbXSlcbiAgICAgIC5jb250cm9sbGVyKCdhY2VDb250cm9sbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkaW50ZXJ2YWwpIHtcblxuICAgICAgICAgICRzY29wZS5hY2VMb2FkZWQgPSBmdW5jdGlvbiAoX2VkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gID0gX2VkaXRvci5nZXRTZXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBfZWRpdG9yLnJlbmRlcmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgIF9lZGl0b3Iuc2V0UmVhZE9ubHkoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5zZXRNb2RlKFwiYWNlL21vZGUvamF2YXNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc2V0VW5kb01hbmFnZXIobmV3IGFjZS5VbmRvTWFuYWdlcigpKTtcblxuICAgICAgICAgICAgICAgICRpbnRlcnZhbCAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRoZW1lICAgICAgICAgPSAkcm9vdFNjb3BlLnRoZW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGb250U2l6ZSAgICAgID0gJHJvb3RTY29wZS5mb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVGFiU2l6ZSAgICAgICA9ICRyb290U2NvcGUudGFiU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkR3V0dGVyICAgICAgICA9ICRyb290U2NvcGUuZ3V0dGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGb2xkV2lkZ2V0ICAgID0gJHJvb3RTY29wZS5mb2xkV2lkZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQcmludE1hcmdpbiAgID0gJHJvb3RTY29wZS5wcmludE1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2hvd0ludmlzaWJsZSA9ICRyb290U2NvcGUuc2hvd0ludmlzaWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkV29yZFdyYXAgICAgICA9ICRyb290U2NvcGUud29yZFdyYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJlYWRPbmx5ICAgICAgPSAkcm9vdFNjb3BlLnJlYWRPbmx5O1xuXG5cbiAgICAgICAgICAgICAgICAgICAgX2VkaXRvci5zZXRPcHRpb25zKHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWRpdG9yIE9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiAnYWNlL3RoZW1lLycgKyAoc2VsZWN0ZWRUaGVtZSAhPT0gdW5kZWZpbmVkID8gc2VsZWN0ZWRUaGVtZSA6ICdhbWJpYW5jZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2FjZS9tb2RlL2phdmFzY3JpcHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IHNlbGVjdGVkUmVhZE9ubHksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbmVkZXJlciBPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93R3V0dGVyOiBzZWxlY3RlZEd1dHRlciwgLy8gQm9vbFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1ByaW50TWFyZ2luOiBzZWxlY3RlZFByaW50TWFyZ2luLCAvLyBCb29sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SW52aXNpYmxlczogc2VsZWN0ZWRTaG93SW52aXNpYmxlLCAvLyBCb29sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Rm9sZFdpZGdldHM6IHNlbGVjdGVkRm9sZFdpZGdldCwgLy8gQm9vbFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUluZGVudEd1aWRlczogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2Vzc2lvbiBPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogc2VsZWN0ZWRGb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYlNpemU6IHNlbGVjdGVkVGFiU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA6IHNlbGVjdGVkV29yZFdyYXBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAuTWFpbl9Db250cm9sbGVyJywgW10pXG4gICAgLmNvbnRyb2xsZXIoJ21haW5Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBUYWJTZXJ2aWNlLCAkc2NlKXtcblxuICAgICAgLy8gICRzY29wZS5vcGVuID0gdHJ1ZTtcblxuICAgICAgICAkc2NvcGUuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLnNob3dIaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmlzVmlzaWJsZSA9ICEkc2NvcGUuaXNWaXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dIaWRlQ29uc29sZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5pc1Zpc2libGUgPSAhJHNjb3BlLmlzVmlzaWJsZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS50YWJMZW5ndGggPSBUYWJTZXJ2aWNlLmdldFRhYigpO1xuXG4gICAgICAgIHZhciBjb3VudCA9IDE7XG4gICAgICAgICRzY29wZS5hZGROZXdUYWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgVGFiU2VydmljZS5hZGRUYWIoJ3VudGl0bGVkJywgY291bnQpO1xuICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY2xvc2VUYWIgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICBUYWJTZXJ2aWNlLnJlbW92ZVRhYihpbmRleCk7XG4gICAgICAgICAgY291bnQtLTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdteUFwcC5uYXZiYXJDb250cm9sbGVyJywgW10pXG4gICAgICAuY29udHJvbGxlcignbmF2YmFyQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgVHJlZVNlcnZpY2UpIHtcblxuICAgICAgICB2YXIgY29udGVudCwgcmFjaztcbiAgICAgICAgdmFyIGNyZWF0ZUNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50VHlwZSwgc2VsZWN0ZWRDb250ZXh0TWVudSkge1xuXG4gICAgICAgICAgICByYWNrID0gKGNvbnRlbnRUeXBlID09ICdmb2xkZXInID8gJ0ZvbGRlcicgOiAnRmlsZScpO1xuICAgICAgICAgICAgY29udGVudCA9IHByb21wdChcIkVudGVyIE5ldyBcIisgcmFjayArIFwiIE5hbWVcIik7XG5cbiAgICAgICAgICAgIGlmKGNvbnRlbnQgPT0gXCJcIiB8fCBjb250ZW50ID09IG51bGwpIHsgYWxlcnQoXCJJbnZhbGlkIE5hbWVcIik7IH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhY2sgPSAoc2VsZWN0ZWRDb250ZXh0TWVudSA9PSAnbmV3ZmlsZScgPyB7bmFtZTogY29udGVudCwgdHlwZTogJ2ZpbGUnfSA6IHtuYW1lOiBjb250ZW50LCB0eXBlOiAnZm9sZGVyJywgY29sbGFwc2U6IHRydWUsIGNoaWxkcmVuOiBbXX0pO1xuXG4gICAgICAgICAgICAgICAgaWYoY29udGVudFR5cGUgPT0gJ2ZvbGRlcicpIHsgVHJlZVNlcnZpY2UuYWRkKHJhY2spOyByZXR1cm47IH1cbiAgICAgICAgICAgICAgICBUcmVlU2VydmljZS5hZGQocmFjayk7IHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICAgJHNjb3BlLm5hdi5uZXdGaWxlID0gZnVuY3Rpb24oKSB7IGNyZWF0ZUNvbnRlbnQoJ2ZpbGUnLCAnbmV3ZmlsZScpOyB9XG4gICAgICAgICAgJHNjb3BlLm5hdi5uZXdGb2xkZXIgPSBmdW5jdGlvbigpIHsgY3JlYXRlQ29udGVudCgnZm9sZGVyJywgJ25ld2ZvbGRlcicpOyB9XG4gICAgICB9KVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICd1c2Ugc3RyaWN0JztcblxuICAgYW5ndWxhci5tb2R1bGUoJ215QXBwLlByZWZlcmVuY2VfQ29udHJvbGxlcicsIFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ1ByZWZlcmVuY2VDb250cm9sbGVyJywgIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRodHRwKSB7XG4gICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcblxuICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIEdldCBhbGwgVGhlbWVzIEpTT05cbiAgICAgICAgICAgICRodHRwLmdldCgnZGF0YS9hY2VfdGhlbWUuanNvbicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5saXN0T2ZUaGVtZSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFRoZW1lXG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hDaGFuZ2VUaGVtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgJHJvb3RTY29wZS50aGVtZSA9ICRzY29wZS5jb25maWcubmFtZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBGb250XG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hDaGFuZ2VGb250ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICB2YXIgeCA9IGV2ZW50LnBhZ2VYO1xuICAgICAgICAgICAgICAgY29uc29sZS5sb2coeCk7XG4gICAgICAgICAgICAgICAkcm9vdFNjb3BlLmZvbnRTaXplID0gJHNjb3BlLmNvbmZpZy5mb250U2l6ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFRhYiBTaXplXG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hDaGFuZ2VUYWJTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAkcm9vdFNjb3BlLnRhYlNpemUgPSAkc2NvcGUuY29uZmlnLnRhYlNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHdXR0ZXJcbiAgICAgICAgICAgICRzY29wZS53YXRjaENoYW5nZUd1dHRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgJHJvb3RTY29wZS5ndXR0ZXIgPSAkc2NvcGUuY29uZmlnLmd1dHRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvbGQgV2lkZ2V0XG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hDaGFuZ2VGb2xkV2lkZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAkcm9vdFNjb3BlLmZvbGRXaWRnZXQgPSAkc2NvcGUuY29uZmlnLmZvbGRXaWRnZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS53YXRjaENoYW5nZVByaW50TWFyZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAkcm9vdFNjb3BlLnByaW50TWFyZ2luID0gJHNjb3BlLmNvbmZpZy5wcmludE1hcmdpbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLndhdGNoQ2hhbmdlU2hvd0ludmlzaWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93SW52aXNpYmxlID0gJHNjb3BlLmNvbmZpZy5zaG93SW52aXNpYmxlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUud2F0Y2hDaGFuZ2VXb3JkV3JhcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgJHJvb3RTY29wZS53b3JkV3JhcCA9ICRzY29wZS5jb25maWcud29yZFdyYXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS53YXRjaENoYW5nZVJlYWRPbmx5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAkcm9vdFNjb3BlLnJlYWRPbmx5ID0gJHNjb3BlLmNvbmZpZy5yZWFkT25seTtcbiAgICAgICAgICAgIH1cbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAuVHJlZVZpZXdfQ29udHJvbGxlcicsIFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ3RyZWVWaWV3Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgVHJlZVNlcnZpY2UpIHtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQVggXCIsIFRyZWVTZXJ2aWNlLmdldERhdGEoKSk7XG4gICAgICAgICRzY29wZS50cmVlRGlyZWN0b3JpZXMgPSBUcmVlU2VydmljZS5nZXREYXRhKCk7XG5cblxuICAgICAgICB2YXIgY29udGVudCwgaXRlbTtcbiAgICAgICAgdmFyIGNyZWF0ZUNvbnRlbnQgPSBmdW5jdGlvbihhY2N1LCBjb250ZW50VHlwZSwgc2VsZWN0ZWRDb250ZXh0TWVudSkge1xuICAgICAgICAgICAgdmFyIGhvbGRlciA9IChjb250ZW50VHlwZSA9PSAnZm9sZGVyJyA/ICdGb2xkZXInIDogJ0ZpbGUnKTtcblxuICAgICAgICAgICAgY29udGVudCA9IHByb21wdChcIkVudGVyIE5ldyBcIisgaG9sZGVyICsgXCIgTmFtZVwiKTtcbiAgICAgICAgICAgIGlmKGNvbnRlbnQgPT0gXCJcIiB8fCBjb250ZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIE5hbWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaG9sZGVyID0gKHNlbGVjdGVkQ29udGV4dE1lbnUgPT0gJ25ld2ZpbGUnID8ge25hbWU6IGNvbnRlbnQsIHR5cGU6ICdmaWxlJ30gOiB7bmFtZTogY29udGVudCwgdHlwZTogJ2ZvbGRlcicsIGNvbGxhcHNlOiB0cnVlLCBjaGlsZHJlbjogW119KTtcbiAgICAgICAgICAgICAgICBpZihjb250ZW50VHlwZSA9PSAnZm9sZGVyJykge1xuICAgICAgICAgICAgICAgICAgYWNjdS5wdXNoKGhvbGRlcik7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ2hpbGRyZW4nKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWNjdS5wdXNoKGhvbGRlcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBub2RlIFRyZWUgRnVuY3Rpb25hbGl0eVxuICAgICAgICAvLyBzY29wZS5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgIC8vIHNjb3BlLmNvbGxhcHNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coc2NvcGUuaXNIaWRkZW4pO1xuICAgICAgICAvLyAgICAgIHNjb3BlLmlzSGlkZGVuID0gc2NvcGUuaXNIaWRkZW4gPyBmYWxzZSA6IHRydWVcbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyAkc2NvcGUubm9kZVNlbGVjdGVkID0gZnVuY3Rpb24gKCRpdGVtLCBpKSB7XG4gICAgICAgIC8vICAgICBpZigkaXRlbS50eXBlID09ICdmaWxlJykge1xuICAgICAgICAvLyAgICAgICB2YXIgdGFiRXhpc3QgPSBUYWJTZXJ2aWNlLmdldFRhYigpO1xuICAgICAgICAvLyAgICAgICBpZih0YWJFeGlzdCA9PSAnJykge1xuICAgICAgICAvLyAgICAgICAgIFRhYlNlcnZpY2UuYWRkVGFiKCRpdGVtLm5hbWUpO1xuICAgICAgICAvLyAgICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYkV4aXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgaWYodGFiRXhpc3RbaV0gPT0gJGl0ZW0ubmFtZSkge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbHJlYWR5IGV4aXN0cyA6IFwiICsgdGFiRXhpc3RbaV0pO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgIFRhYlNlcnZpY2UuYWRkVGFiKCRpdGVtLm5hbWUpO1xuICAgICAgICAvLyAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cblxuICAgICAgICAkc2NvcGUubWVudU9wdGlvbnMgPSBbXG4gICAgICAgICAgICAvLyBDUkVBVElORyBGSUxFXG4gICAgICAgICAgICBbJ05ldyBGaWxlJywgZnVuY3Rpb24gKCRpdGVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRpdGVtLm5vZGUudHlwZSA9PT0gJ2ZvbGRlcicpIHsgLy8gTkVXIEZJTEUgV0hFTiBJVFwiUyBDTElDS0VEIE9OIEZPTERFUlxuICAgICAgICAgICAgICAgICAgaXRlbSA9ICRpdGVtLm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICBjcmVhdGVDb250ZW50KGl0ZW0sICdmaWxlJywgJ25ld2ZpbGUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZigkaXRlbS5ub2RlLnR5cGUgPT09ICdmaWxlJykgeyAvLyBORVcgRklMRSBXSEVOIElUXCJTIENMSUNLRUQgT04gRklMRVxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gJGl0ZW0uJHBhcmVudC5jb2xsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDb250ZW50KGl0ZW0sICdmaWxlJywgJ25ld2ZpbGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdqc29uJylbMF07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJhbnNpdCk7XG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgLy8gQ1JFQVRJTkcgRk9MREVSXG4gICAgICAgICAgICBbJ05ldyBGb2xkZXInLCBmdW5jdGlvbiAoJGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoJGl0ZW0ubm9kZS50eXBlID09PSAnZm9sZGVyJykgeyAvLyBORVcgRk9MREVSIFdIRU4gSVRcIlMgQ0xJQ0tFRCBPTiBGT0xERVJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSAgPSAkaXRlbS5ub2RlLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDb250ZW50KGl0ZW0sICdmb2xkZXInLCAnbmV3Zm9sZGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkaXRlbS5ub2RlLnR5cGUgPT09ICdmaWxlJykgeyAvLyBORVcgRklMRSBXSEVOIElUXCJTIENMSUNLIE9OIEZJTEVcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9ICRpdGVtLiRwYXJlbnQuY29sbGVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29udGVudChpdGVtLCAnZm9sZGVyJywgJ25ld2ZvbGRlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgWydSZW5hbWUnLCBmdW5jdGlvbigkaXRlbSkge1xuICAgICAgICAgICAgICB2YXIgY3VycmVudE5hbWUgPSAkaXRlbS5ub2RlLm5hbWVcbiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwcm9tcHQoXCJDaGFuZ2UgZmlsZSBuYW1lXCIsIGN1cnJlbnROYW1lKTtcbiAgICAgICAgICAgICAgICBpZihuYW1lID09PSBjdXJyZW50TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIllvdSBkaWRuJ3QgY2hhbmdlIHRoZSBuYW1lXCIpOyByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaXRlbS5ub2RlLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhcInJlbmFtZSBcIiwgJGl0ZW0uJHBhcmVudC5jb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgWydEZWxldGUnLCBmdW5jdGlvbiAoJGl0ZW0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYW5ndWxhci50b0pzb24oJGl0ZW0ubm9kZSkpO1xuICAgICAgICAgICAgICAvLyB2YXIgbmFtZSA9ICRpdGVtLm5vZGUubmFtZVxuICAgICAgICAgICAgICAvLyBpZihjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIisgbmFtZSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAvLyRpdGVtLiRwYXJlbnQuY29sbGVjdGlvbi5zcGxpY2UoJGl0ZW0uJHBhcmVudC4kaW5kZXgsIDEpO1xuICAgICAgICAgICAgICRpdGVtLiRwYXJlbnQuY29sbGVjdGlvbi5zcGxpY2UoJGl0ZW0uJHBhcmVudC4kaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgIC8vIHJldHVybjtcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkaXRlbS4kcGFyZW50LmNvbGxlY3Rpb24uc3BsaWNlKCRpdGVtLiRwYXJlbnQuJGluZGV4LCAxKSk7XG5cbiAgICAgICAgICAgIH1dXG4gICAgICAgIF07XG5cbiAgICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAuTmF2SGVhZGVyX0RpcmVjdGl2ZScsIFtdKVxuICAgICAgLmRpcmVjdGl2ZSgnbmF2SGVhZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy92aWV3cy9jb21wb25lbnRzL05hdkhlYWRlci5odG1sJ1xuICAgICAgICAgIH07XG4gICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ215QXBwLlJlc2l6ZXJfRGlyZWN0aXZlJywgW10pXG4gICAgICAgIC5kaXJlY3RpdmUoJ3Jlc2l6ZXInLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgICAgICAgICAgICAkZWxlbWVudC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XG4gICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oJ21vdXNldXAnLCBtb3VzZXVwKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gbW91c2Vtb3ZlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgaWYoJGF0dHJzLnJlc2l6ZXIgPT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB2ZXJ0aWNhbCByZXNpemVyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBldmVudC5wYWdlWDtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmKCRhdHRycy5yZXNpemVyTWF4ICYmIHggPiAkYXR0cnMucmVzaXplck1heCkgeyB4ID0gcGFyc2VJbnQoJGF0dHJzLnJlc2l6ZXJNYXgpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYoJGF0dHJzLnJlc2l6ZXJNYXggJiYgeCAgPCAkYXR0cnMucmVzaXplck1pbiApIHsgeCA9IDU1OyB9XG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigkYXR0cnMucmVzaXplckxlZnQudG9TdHJpbmcoKSkuc3R5bGUud2lkdGggPSAoeCAtIDU1KSArICdweCdcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgaG9yaXpvbnRhbCByZXNpemVyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBldmVudC5wYWdlWTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmKCRhdHRycy5yZXNpemVyWU1heCAmJiB4ID4gJGF0dHJzLnJlc2l6ZXJZTWF4KSB7IHkgPSBwYXJzZUludCgkYXR0cnMucmVzaXplcllNYXgpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYoJGF0dHJzLnJlc2l6ZXJZTWF4ICYmIHggIDwgJGF0dHJzLnJlc2l6ZXJZTWluICkgeyB5ID0gNTU7IH1cbiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCRhdHRycy5yZXNpemVyQm90dG9tLnRvU3RyaW5nKCkpLnN0eWxlLmhlaWdodCA9ICgteSArIDU1NSkgKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZXVwKCkge1xuICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ215QXBwLlN1YlRhYl9EaXJlY3RpdmUnLCBbXSlcbiAgICAgICAgLmRpcmVjdGl2ZSgnc3ViQ29udGVudCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvdmlld3MvY29tcG9uZW50cy9TdWJUYWIuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdteUFwcC5UYWJfU2VydmljZScsIFtdKVxuICAgICAgLmZhY3RvcnkoJ1RhYlNlcnZpY2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdGFiSXRlbSA9IFtdO1xuICAgICAgICAgIHZhciBzdmMgPSB7fTtcblxuICAgICAgICAgIHN2Yy5hZGRUYWIgPSBmdW5jdGlvbiAoaXRlbSwgaWRObykge1xuICAgICAgICAgICAgdGFiSXRlbS5wdXNoKHtuYW1lOiBpdGVtLCBpZDogaWROb30pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBRERFRFwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdmMucmVtb3ZlVGFiID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHRhYkl0ZW0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN2Yy5nZXRUYWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFiSXRlbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gc3ZjO1xuICAgICAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdteUFwcC5UcmVlX1NlcnZpY2UnLCBbXSlcclxuICAgICAgICAuZmFjdG9yeSgnVHJlZVNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCkge1xyXG4gICAgICAgICAgICB2YXIgc3ZjID0ge307XHJcbiAgICAgICAgICAgIHZhciB0cmVlRGlyZWN0b3JpZXMgPSBbe1xyXG4gICAgICAgICAgICBcdFx0bmFtZTogXCJHdWxwU3JjXCIsXHJcbiAgICAgICAgICAgIFx0XHR0eXBlOiBcImZvbGRlclwiLFxyXG4gICAgICAgICAgICBcdFx0Y29sbGFwc2U6IHRydWUsXHJcbiAgICAgICAgICAgIFx0XHRjaGlsZHJlbjogW3tcclxuICAgICAgICAgICAgXHRcdFx0bmFtZTogXCJDU1NcIixcclxuICAgICAgICAgICAgXHRcdFx0dHlwZTogXCJmb2xkZXJcIixcclxuICAgICAgICAgICAgXHRcdFx0Y29sbGFwc2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBcdFx0XHRjaGlsZHJlbjogW3tcclxuICAgICAgICAgICAgXHRcdFx0XHRcdG5hbWU6IFwic3R5bGUxLmNzc1wiLFxyXG4gICAgICAgICAgICBcdFx0XHRcdFx0dHlwZTogXCJmaWxlXCJcclxuICAgICAgICAgICAgXHRcdFx0XHR9LFxyXG4gICAgICAgICAgICBcdFx0XHRcdHtcclxuICAgICAgICAgICAgXHRcdFx0XHRcdG5hbWU6IFwic3R5bGUyLmNzc1wiLFxyXG4gICAgICAgICAgICBcdFx0XHRcdFx0dHlwZTogXCJmaWxlXCJcclxuICAgICAgICAgICAgXHRcdFx0XHR9XHJcbiAgICAgICAgICAgIFx0XHRcdF1cclxuICAgICAgICAgICAgXHRcdH1dXHJcbiAgICAgICAgICAgIFx0fSxcclxuICAgICAgICAgICAgXHR7XHJcbiAgICAgICAgICAgIFx0XHRuYW1lOiBcIlNHdWxwU3JjXCIsXHJcbiAgICAgICAgICAgIFx0XHR0eXBlOiBcImZvbGRlclwiLFxyXG4gICAgICAgICAgICBcdFx0Y29sbGFwc2U6IHRydWUsXHJcbiAgICAgICAgICAgIFx0XHRjaGlsZHJlbjogW3tcclxuICAgICAgICAgICAgXHRcdFx0bmFtZTogXCJDU1NcIixcclxuICAgICAgICAgICAgXHRcdFx0dHlwZTogXCJmb2xkZXJcIixcclxuICAgICAgICAgICAgXHRcdFx0Y29sbGFwc2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBcdFx0XHRjaGlsZHJlbjogW3tcclxuICAgICAgICAgICAgXHRcdFx0XHRcdG5hbWU6IFwic3R5bGUxLmNzc1wiLFxyXG4gICAgICAgICAgICBcdFx0XHRcdFx0dHlwZTogXCJmaWxlXCJcclxuICAgICAgICAgICAgXHRcdFx0XHR9LFxyXG4gICAgICAgICAgICBcdFx0XHRcdHtcclxuICAgICAgICAgICAgXHRcdFx0XHRcdG5hbWU6IFwic3R5bGUyLmNzc1wiLFxyXG4gICAgICAgICAgICBcdFx0XHRcdFx0dHlwZTogXCJmaWxlXCJcclxuICAgICAgICAgICAgXHRcdFx0XHR9XHJcbiAgICAgICAgICAgIFx0XHRcdF1cclxuICAgICAgICAgICAgXHRcdH1dXHJcbiAgICAgICAgICAgIFx0fVxyXG4gICAgICAgICAgICBdXHJcblxyXG5cclxuICAgICAgICAgICAgICBzdmMuYWRkID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICB0cmVlRGlyZWN0b3JpZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc3ZjLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHJlY3Vyc2Uob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9ialtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYW5ndWxhci50b0pzb24ob2JqW2tleV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSh0cmVlRGlyZWN0b3JpZXMpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgc3ZjLmdldERhdGEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyZWVEaXJlY3Rvcmllcyk7XHJcbiAgICAgICAgICAgICAgIHJldHVybiB0cmVlRGlyZWN0b3JpZXM7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3ZjO1xyXG4gICAgICAgIH0pO1xyXG5cclxufSkoKTtcclxuIl19
